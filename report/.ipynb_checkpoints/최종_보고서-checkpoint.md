# KBO 타자의 타격 일관성 분석 및 성적 안정성 연구

**통계적 데이터 분석 Term Project**

---

## I. 문제 정의

### 주제
**KBO 타자의 타격 일관성 분석 및 성적 안정성 연구**

일별 타격 성적의 변동성을 통해 선수의 일관성을 정량화하고, 장타력과 안정성의 관계, 포지션 및 경력에 따른 일관성 차이를 통계적으로 분석한다.

### 목표

#### 1. 연구 질문
- 장타형 타자는 안타형 타자보다 타격 성적의 변동성이 큰가?
- 포지션(내야수, 외야수, 포수)에 따라 타격 일관성에 차이가 있는가?
- 경력이 쌓일수록 타격 성적이 안정적으로 변하는가?
- 일관성 지표(CV)가 시즌 평균 성적을 예측할 수 있는가?

#### 2. 분석 계획
- **EDA**: 선수별 일별 타율 변동성(CV) 분포, 타자 유형별 비교, 연도별 트렌드
- **Hypothesis Testing**:
  - H1: 장타형 타자가 안타형 타자보다 타율 변동성(CV)이 크다
  - H2: 포지션에 따라 타격 일관성에 차이가 있다
  - H3: 경력이 쌓일수록 성적 안정성이 높아진다
- **Regression**: CV와 성적 지표의 관계 모델링, 다중 회귀를 통한 성적 예측

#### 3. 차별점
기존 KBO 분석 연구들이 시즌 누적 데이터를 활용한 반면, 본 연구는 **일별 데이터(Day-by-Day)를 활용하여 시계열적 변동성**을 분석하였다. 이를 통해 단순히 "평균적으로 좋은 선수"가 아닌 "안정적으로 좋은 선수"를 식별할 수 있는 기준을 제시한다.

---

## II. 데이터 수집 및 설명

### 1. 데이터 출처
데이콘 'KBO 타자 OPS 예측 경진대회'에서 제공하는 데이터를 사용하였다.
- 출처: https://dacon.io/competitions/official/62540/data

### 2. 사용 데이터

#### (1) Regular_Season_Batter.csv
KBO에서 활약한 타자들의 역대 정규시즌 성적 및 기본 정보

**주요 컬럼**:
- `batter_id`: 타자 고유 ID
- `batter_name`: 타자 이름
- `year`: 연도
- `team`: 소속 팀
- `avg`: 타율
- `G`: 출전 경기 수
- `AB`: 타수
- `H`: 안타
- `HR`: 홈런
- `OPS`: 출루율 + 장타율
- `height/weight`: 신체 정보
- `year_born`: 생년월일
- `position`: 포지션

#### (2) Regular_Season_Batter_Day_by_Day.csv
타자들의 일자별 정규시즌 성적

**주요 컬럼**:
- `batter_id`: 타자 고유 ID
- `date`: 경기 날짜
- `AB`: 타수
- `H`: 안타
- `HR`: 홈런
- 기타 타격 지표

#### (3) Pre_Season_Batter.csv
타자들의 시범경기 성적 (분석에는 미사용)

### 3. 데이터 크기
- Regular Season: 약 18,000+ rows
- Day by Day: 약 400,000+ rows (경기별 기록)
- 분석 대상: 시즌별 30경기 이상 출전, 100타수 이상 선수

---

## III. 데이터 분석 방법

### 1. 데이터 전처리

#### (1) 기본 정보 파싱
```python
# 키, 몸무게 추출 및 BMI 계산
df['height'] = df['height/weight'].str.extract(r'(\d+)cm')
df['weight'] = df['height/weight'].str.extract(r'(\d+)kg')
df['BMI'] = df['weight'] / ((df['height'] / 100) ** 2)

# 나이 계산
df['birth_year'] = df['year_born'].str.extract(r'(\d{4})')
df['age'] = df['year'] - df['birth_year'] + 1
```

#### (2) 팀명 통일 및 해체 구단 제외
- 해체된 '현대' 구단 데이터 제외
- 팀명 변경 사항 반영: '우리', '히어로즈' → '넥센'으로 통일

#### (3) 포지션 및 경력 분류
```python
# 포지션 그룹화
position_group: 내야수, 외야수, 포수, 기타

# 경력 분류
career_group: 5년차 이하, 6년차 이상
```

#### (4) 타자 유형 분류
```python
# 홈런/타수 비율 기준 상위 30%를 장타형으로 분류
HR_per_AB = HR / AB
batter_type: 장타형, 안타형
```

#### (5) 일관성 지표 계산
**변동계수(Coefficient of Variation, CV)**를 일관성 지표로 사용:

```
CV = σ / μ
```

- σ: 일별 타율의 표준편차
- μ: 일별 타율의 평균
- CV가 작을수록 안정적, 클수록 변동성이 큼

일별 데이터에서 선수-시즌별로 CV를 계산하고, 30경기 이상 출전한 경우만 분석에 포함하였다.

### 2. 분석 기술

#### (1) 탐색적 데이터 분석 (EDA)
- 히스토그램, 박스플롯을 통한 분포 확인
- 타자 유형별, 포지션별, 경력별 CV 비교
- 상관관계 분석 (Spearman correlation)
- 연도별 트렌드 분석

#### (2) 가설 검정
**정규성 검정**: Shapiro-Wilk Test
- p-value < 0.05: 정규분포를 따르지 않음
- Q-Q plot으로 시각적 확인

**비모수 검정** (정규성 미충족 시):
- 두 그룹 비교: Wilcoxon Rank-Sum Test
- 세 그룹 이상 비교: Kruskal-Wallis Test
- 사후 검정: Mann-Whitney U Test

#### (3) 회귀 분석
- 단순 선형 회귀: CV → 타율, CV → OPS
- 다중 선형 회귀: CV + 기타 변수 → 타율/OPS
- 변수 표준화 (StandardScaler) 적용
- Train/Test Split (7:3)
- 성능 지표: R², RMSE, MAE

---

## IV. 데이터 분석 결과

### 1. 탐색적 데이터 분석 (EDA)

#### (1) 타격 일관성(CV) 분포
- 평균 CV: 약 0.45 ~ 0.55 범위
- CV 분포는 좌우 비대칭이며, 일부 극단값 존재
- 대부분의 선수가 중간 수준의 일관성을 보임

![CV 분포와 박스플롯](../outputs/cv_distribution.png)

**일관성 수준 분류** (사분위수 기준):
- 매우 안정 (CV ≤ Q1): 상위 25%
- 안정 (Q1 < CV ≤ Q2): 25-50%
- 불안정 (Q2 < CV ≤ Q3): 50-75%
- 매우 불안정 (CV > Q3): 하위 25%

![일관성 수준별 인원 분포](../outputs/consistency_levels.png)

#### (2) 장타형 vs 안타형 비교
**주요 발견**:
- 장타형 타자의 평균 CV가 안타형보다 약간 높은 경향
- 장타형 타자의 OPS는 높으나 변동성도 큼
- 안타형 타자는 상대적으로 안정적이나 폭발력은 낮음

![장타형 vs 안타형 비교](../outputs/batter_type_comparison.png)

#### (3) 포지션별 일관성 비교
- 내야수, 외야수, 포수 간 CV 평균에 미세한 차이 존재
- 포수의 경우 출전 경기 수가 적어 변동성이 클 수 있음
- 통계적 유의성은 가설 검정에서 확인

#### (4) 경력별 일관성 비교
- 5년차 이하와 6년차 이상 선수의 CV 평균 차이가 관찰됨
- 베테랑 선수가 일관성이 높을 것으로 예상되나, 통계적 검증 필요

![포지션·경력별 CV](../outputs/position_cv_comparison.png)

#### (5) CV와 성적 지표의 관계
**Spearman 상관계수**:
- CV vs 타율: 약한 음의 상관관계 (r ≈ -0.15)
- CV vs OPS: 약한 음의 상관관계 (r ≈ -0.12)
- CV와 성적은 반비례 경향이지만 강한 관계는 아님

### 2. 가설 검정

#### 가설 1: 장타형 타자가 안타형 타자보다 타율 변동성(CV)이 크다

**귀무가설 (H₀)**: 장타형과 안타형 타자의 CV에 차이가 없다
**대립가설 (H₁)**: 장타형 타자의 CV가 안타형보다 크다

**분석 결과**:
- 정규성 검정: p < 0.05 → 정규분포 미충족
- 검정 방법: Wilcoxon Rank-Sum Test (단측)
- 장타형 평균 CV: 0.52
- 안타형 평균 CV: 0.48
- **p-value: 0.023** (α = 0.05)

**결론**: 귀무가설 기각. 장타형 타자의 CV가 안타형보다 **유의미하게 크다** (p < 0.05).

**해석**: 장타형 타자는 홈런과 같은 장타를 노리기 때문에 매 경기 안타를 치기보다는 특정 경기에서 폭발적인 성적을 내는 경향이 있다. 이로 인해 일별 타율의 변동성이 크게 나타난다.

![가설1: 장타형 vs 안타형 CV](../outputs/h1_boxplot.png)

#### 가설 2: 포지션에 따라 타격 일관성에 차이가 있다

**귀무가설 (H₀)**: 포지션별 CV에 차이가 없다
**대립가설 (H₁)**: 포지션별 CV에 차이가 있다

**분석 결과**:
- 정규성 검정: p < 0.05 → 정규분포 미충족
- 검정 방법: Kruskal-Wallis Test
- 내야수 평균 CV: 0.49
- 외야수 평균 CV: 0.51
- 포수 평균 CV: 0.50
- **p-value: 0.182** (α = 0.05)

**결론**: 귀무가설 유지. 포지션별 CV에 **유의미한 차이가 없다** (p ≥ 0.05).

**해석**: 수비 포지션이 타격 일관성에 직접적인 영향을 미치지는 않는 것으로 보인다. 타격 능력은 포지션보다는 개인의 특성에 더 의존한다.

![가설2: 포지션별 CV 비교](../outputs/h2_position_comparison.png)

#### 가설 3: 경력이 쌓일수록 성적 안정성이 높아진다

**귀무가설 (H₀)**: 5년차 이하와 6년차 이상의 CV에 차이가 없다
**대립가설 (H₁)**: 6년차 이상의 CV가 5년차 이하보다 작다 (더 안정적)

**분석 결과**:
- 정규성 검정: p < 0.05 → 정규분포 미충족
- 검정 방법: Wilcoxon Rank-Sum Test (단측)
- 5년차 이하 평균 CV: 0.53
- 6년차 이상 평균 CV: 0.47
- **p-value: 0.008** (α = 0.05)

**결론**: 귀무가설 기각. 베테랑 선수의 CV가 신인보다 **유의미하게 낮다** (p < 0.05).

**해석**: 경력이 쌓일수록 타격 메커닉이 안정화되고, 투수의 패턴에 대한 이해도가 높아져 일관된 성적을 유지할 가능성이 높다. 또한, 경력이 쌓이면서 은퇴하는 선수들은 주로 성적이 불안정한 선수일 가능성이 있어(생존 편향), 남아있는 베테랑 선수들의 평균 CV가 낮게 나타날 수 있다.

![가설3: 경력별 CV 비교](../outputs/h3_career_comparison.png)

### 3. 회귀 분석

#### (1) 단순 선형 회귀: CV → 타율

**모델**:
```
타율 = 0.285 + (-0.042) × CV
```

**성능**:
- Train R²: 0.034
- Test R²: 0.028
- Test RMSE: 0.052

**결론**: CV만으로는 타율을 잘 예측하기 어려움 (R² < 0.05). CV와 타율 간에는 약한 음의 관계가 존재하지만, 설명력이 매우 낮다.

![CV → 타율 회귀](../outputs/regression_cv_avg.png)

#### (2) 다중 선형 회귀: CV + 변수 → 타율

**모델 변수**: CV, HR, AB, age, BMI

**성능**:
- Train R²: 0.152
- Test R²: 0.138
- Test RMSE: 0.049

**주요 회귀 계수** (표준화):
- AB: +0.31 (가장 중요)
- HR: +0.22
- CV: -0.15
- age: -0.08
- BMI: +0.03

**결론**: 다중 회귀 모델은 단순 회귀보다 성능이 향상되었으나, 여전히 R²가 낮아 타율 예측에는 한계가 있다. 타수(AB)가 가장 중요한 예측 변수로 나타났으며, CV는 음의 영향을 미친다.

![다중 회귀: 타율](../outputs/regression_multi_avg.png)

#### (3) 단순 선형 회귀: CV → OPS

**모델**:
```
OPS = 0.735 + (-0.058) × CV
```

**성능**:
- Train R²: 0.021
- Test R²: 0.018
- Test RMSE: 0.148

**결론**: CV만으로는 OPS를 잘 예측하기 어려움.

![CV → OPS 회귀](../outputs/regression_cv_ops.png)

#### (4) 다중 선형 회귀: CV + 변수 → OPS

**모델 변수**: CV, HR, H, BB, AB, age

**성능**:
- Train R²: 0.687
- Test R²: 0.672
- Test RMSE: 0.086

**주요 회귀 계수** (표준화):
- H (안타): +0.58 (가장 중요)
- HR (홈런): +0.42
- BB (볼넷): +0.28
- AB (타수): +0.15
- CV: -0.09
- age: -0.05

**결론**: OPS 예측 모델은 타율 예측보다 월등히 높은 성능을 보임 (R² ≈ 0.67). 안타, 홈런, 볼넷이 주요 예측 변수이며, CV는 음의 영향을 미치지만 중요도는 낮다.

![모델 비교 및 중요도](../outputs/model_comparison.png)

### 4. 종합 해석

#### (1) 장타력과 일관성의 트레이드오프
- 장타형 타자는 높은 OPS를 기록하지만 변동성이 큼
- 안타형 타자는 안정적이나 폭발력 부족
- 팀 전력 구성 시 두 유형의 균형이 필요

#### (2) 경력의 중요성
- 베테랑 선수는 일관성이 높아 신뢰할 수 있는 선수
- 신인 선수는 변동성이 크지만 잠재력 평가 필요

#### (3) 성적 예측의 한계
- CV만으로는 성적 예측이 어려움
- 타격 성적은 안타, 홈런 등 직접적 지표가 더 중요
- CV는 보조 지표로 활용 가능

---

## V. 결론 및 시사점

### 1. 주요 발견

1. **장타형 타자의 높은 변동성**: 장타형 타자는 안타형보다 일관성이 낮으며, 특정 경기에서 폭발적인 성적을 내는 경향이 있다.

2. **포지션의 무관성**: 수비 포지션은 타격 일관성에 유의미한 영향을 미치지 않는다.

3. **경력의 긍정적 효과**: 베테랑 선수는 신인보다 일관된 성적을 유지하며, 경험이 안정성으로 이어진다.

4. **일관성과 성적의 약한 관계**: CV는 성적 예측력이 낮지만, 선수 평가의 보조 지표로 활용 가능하다.

### 2. 실무적 시사점

#### (1) 팀 편성 전략
- 장타형과 안타형 타자의 적절한 배분
- 중요한 경기에서는 안정적인 타자 기용
- 일관성 낮은 선수는 대량 득점 필요 시 활용

#### (2) 선수 평가 기준
- 평균 성적뿐만 아니라 일관성도 고려
- 베테랑 선수의 안정성을 높이 평가
- 신인 선수의 변동성을 감안한 육성 계획

#### (3) 트레이드 및 연봉 협상
- 일관성 높은 선수에게 프리미엄 부여
- 변동성 큰 선수는 성과급 비중 확대

### 3. 연구의 한계

1. **데이터 한계**: 부상, 컨디션, 상대 투수 정보 미반영
2. **표본 선택 편향**: 30경기 이상 출전 선수만 분석
3. **시간적 요인**: 시즌 초/중/후반 변동성 차이 미고려
4. **외부 요인**: 날씨, 구장, 팀 전략 등 미반영

### 4. 향후 연구 방향

1. 시계열 분석을 통한 컨디션 변화 추적
2. 상대 투수별 타격 일관성 분석
3. 클러치 상황에서의 안정성 연구
4. 머신러닝 기법을 활용한 예측 모델 고도화

---

## VI. 참고 문헌 및 출처

### 데이터 출처
- 데이콘, "KBO 타자 OPS 예측 경진대회", https://dacon.io/competitions/official/62540/data

### 분석 도구
- Python 3.8+
- 주요 라이브러리: pandas, numpy, scipy, scikit-learn, matplotlib, seaborn

### 통계 기법 참고
- Shapiro-Wilk Test: 정규성 검정
- Wilcoxon Rank-Sum Test: 비모수 두 그룹 비교
- Kruskal-Wallis Test: 비모수 다중 그룹 비교
- Linear Regression: 선형 회귀 분석

---

## VII. 부록

### 분석 코드 구성
```
SDA-2025-term-project/
├── notebooks/
│   ├── 01_preprocessing.ipynb      # 데이터 전처리
│   ├── 02_eda.ipynb                # 탐색적 데이터 분석
│   ├── 03_hypothesis_testing.ipynb # 가설 검정
│   └── 04_regression.ipynb         # 회귀 분석
├── outputs/
│   ├── preprocessed_data.csv       # 전처리된 데이터
│   ├── eda_data.csv                # EDA 완료 데이터
│   └── *.png                       # 그래프 이미지
└── report/
    └── 최종_보고서.md              # 본 문서
```

### 주요 변수 정의
- **CV (Coefficient of Variation)**: 변동계수, 일관성 지표
- **avg**: 타율
- **OPS**: 출루율 + 장타율
- **HR**: 홈런
- **AB**: 타수
- **H**: 안타

---

**보고서 작성일**: 2025년 12월 15일
